<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Segment Modeler - Application de mod√©lisation de segments</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-900 text-gray-100">
    <div id="app" class="min-h-screen p-4 md:p-6">
        <!-- Header -->
        <header class="max-w-6xl mx-auto mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">
                <i class="fas fa-robot text-purple-400 mr-3"></i>
                Mod√©lisation de S√©quence de Segments Robotiques
            </h1>
            <p class="text-gray-400">
                Cr√©ez, visualisez et exportez des s√©quences de segments pour vos projets robotiques
            </p>
        </header>

        <!-- Main Content -->
        <div class="max-w-6xl mx-auto">
            <!-- Two Column Layout -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                
                <!-- Left Column: Segment Creation Form -->
                <div class="bg-gray-800 rounded-xl p-5 border border-gray-700 shadow-lg">
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center mr-3">
                            <i class="fas fa-plus text-white"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-purple-300">Cr√©er un Segment</h2>
                    </div>

                    <!-- Primary Fields -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-list-check text-blue-400 mr-2"></i>
                            <h3 class="text-lg font-semibold text-blue-300">üìã Champs Primaires</h3>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm text-gray-300 mb-2">
                                    <i class="fas fa-hashtag text-gray-400 mr-1"></i> ID
                                </label>
                                <input type="number" id="segment-id" value="1" 
                                       class="form-input">
                            </div>

                            <div>
                                <label class="block text-sm text-gray-300 mb-2">
                                    <i class="fas fa-tag text-gray-400 mr-1"></i> Nom du Segment
                                </label>
                                <input type="text" id="segment-name" value="segment_1" 
                                       class="form-input">
                            </div>

                            <div>
                                <label class="block text-sm text-gray-300 mb-2">
                                    <i class="fas fa-ruler text-gray-400 mr-1"></i> Distance (cm)
                                </label>
                                <input type="number" id="segment-distance" value="100" 
                                       class="form-input">
                            </div>

                            <div>
                                <label class="block text-sm text-gray-300 mb-2">
                                    <i class="fas fa-shapes text-gray-400 mr-1"></i> Type de Segment
                                </label>
                                <select id="segment-type" class="form-select">
                                    <option value="ligne_continue">Ligne Continue</option>
                                    <option value="virage">Virage</option>
                                    <option value="sinus">Sinus</option>
                                    <option value="cercle">Cercle</option>
                                    <option value="demi_cercle">Demi-Cercle</option>
                                    <option value="arc">Arc de Cercle</option>
                                    <option value="zigzag">Zigzag</option>
                                </select>
                            </div>

                            <!-- Ligne Noire ou Blanche (Obligatoire) -->
                            <div>
                                <label class="block text-sm text-gray-300 mb-2">
                                    <i class="fas fa-palette text-gray-400 mr-1"></i> Ligne *
                                </label>
                                <select id="line-color" class="form-select" required>
                                    <option value="">S√©lectionnez la couleur</option>
                                    <option value="noire" selected>Ligne Noire</option>
                                    <option value="blanche">Ligne Blanche</option>
                                </select>
                            </div>

                            <!-- Frein (Obligatoire) -->
                            <div>
                                <label class="block text-sm text-gray-300 mb-2">
                                    <i class="fas fa-stop-circle text-gray-400 mr-1"></i> Type de Frein *
                                </label>
                                <select id="brake-type" class="form-select" required>
                                    <option value="">S√©lectionnez le frein</option>
                                    <option value="frein_sec" selected>Frein Sec</option>
                                    <option value="frein_progressif">Frein Progressif</option>
                                    <option value="sans_frein">Sans Frein</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Speed Section -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-bolt text-green-400 mr-2"></i>
                            <h3 class="text-lg font-semibold text-green-300">‚ö° Vitesse</h3>
                        </div>
                        
                        <div class="flex space-x-4 mb-4">
                            <button id="speed-unchanged" class="speed-btn active">
                                <i class="fas fa-equals mr-2"></i> Inchang√©e
                            </button>
                            <button id="speed-modify" class="speed-btn">
                                <i class="fas fa-sliders mr-2"></i> Modifier
                            </button>
                        </div>

                        <div id="speed-params" class="hidden bg-gray-700/50 p-4 rounded-lg">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-gray-300 mb-2">Vitesse Max</label>
                                    <input type="number" id="speed-max" placeholder="Ex: 100" 
                                           class="form-input">
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-300 mb-2">Vitesse Base</label>
                                    <input type="number" id="speed-base" placeholder="Ex: 50" 
                                           class="form-input">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Driving Mode -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-car text-pink-400 mr-2"></i>
                            <h3 class="text-lg font-semibold text-pink-300">üöó Mode de Conduite</h3>
                        </div>
                        
                        <select id="driving-mode" class="form-select mb-3">
                            <option value="pid_ligne">PID Ligne</option>
                            <option value="encodeur_distance">Encodeur Distance</option>
                            <option value="suivi_ligne">Suivi de Ligne</option>
                            <option value="gyroscope">Gyroscope</option>
                            <option value="custom">‚úçÔ∏è √âcrire moi-m√™me</option>
                        </select>

                        <div id="custom-driving-mode" class="hidden">
                            <input type="text" id="custom-driving-input" placeholder="√âcrivez votre mode de conduite personnalis√©" 
                                   class="form-input">
                        </div>
                    </div>

                    <!-- Interrupted Lines -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-grip-lines text-yellow-400 mr-2"></i>
                            <h3 class="text-lg font-semibold text-yellow-300">‚ûñ Traits Interrompus</h3>
                        </div>
                        
                        <div class="flex items-center mb-4">
                            <input type="checkbox" id="enable-traits" class="w-5 h-5 mr-3">
                            <label for="enable-traits" class="text-gray-300">Activer les traits interrompus</label>
                        </div>

                        <div id="traits-container" class="hidden space-y-3 bg-gray-700/50 p-4 rounded-lg">
                            <p class="text-sm text-gray-400 mb-3">
                                <i class="fas fa-info-circle mr-2"></i>Distances entre i et i+1 (en cm)
                            </p>
                            <div id="traits-list">
                                <div class="trait-item flex gap-2 mb-2">
                                    <input type="number" value="3" class="trait-input" placeholder="Trait 1">
                                    <button class="remove-trait">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="trait-item flex gap-2 mb-2">
                                    <input type="number" value="2" class="trait-input" placeholder="Trait 2">
                                    <button class="remove-trait">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <button id="add-trait" class="add-trait-btn">
                                <i class="fas fa-plus mr-2"></i> Ajouter un trait
                            </button>
                        </div>
                    </div>

                    <!-- End Condition -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-flag-checkered text-red-400 mr-2"></i>
                            <h3 class="text-lg font-semibold text-red-300">üèÅ Condition de Fin</h3>
                        </div>
                        
                        <select id="end-condition" class="form-select mb-4">
                            <option value="aucune" selected>Aucune</option>
                            <option value="distance">Distance</option>
                            <option value="capteurs">Capteurs</option>
                            <option value="angle">Angle</option>
                            <option value="temps">Temps</option>
                            <option value="custom">‚úçÔ∏è Personnalis√©</option>
                        </select>

                        <!-- Condition Parameters -->
                        <div id="condition-params" class="space-y-4">
                            <!-- Will be filled dynamically based on selection -->
                        </div>
                    </div>

                    <!-- Add Segment Button -->
                    <button id="add-segment" class="add-segment-btn">
                        <i class="fas fa-plus-circle mr-3 text-xl"></i>
                        Ajouter le Segment
                    </button>
                </div>

                <!-- Right Column: Segment List & Preview -->
                <div class="bg-gray-800 rounded-xl p-5 border border-gray-700 shadow-lg">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                        <div class="flex items-center mb-4 md:mb-0">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-green-500 to-teal-500 flex items-center justify-center mr-3">
                                <i class="fas fa-list text-white"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-green-300">Segments</h2>
                                <p id="segment-count" class="text-gray-400">0 segment(s) cr√©√©(s)</p>
                            </div>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button id="toggle-view" class="action-btn blue-btn">
                                <i class="fas fa-eye mr-2"></i>
                                <span id="view-mode-text">Vue JSON</span>
                            </button>
                            <button id="export-json" class="action-btn purple-btn">
                                <i class="fas fa-download mr-2"></i>
                                Exporter
                            </button>
                            <button id="clear-all" class="action-btn red-btn">
                                <i class="fas fa-trash-alt mr-2"></i>
                                Tout effacer
                            </button>
                        </div>
                    </div>

                    <!-- Segment List View -->
                    <div id="segment-list-view" class="segment-list-view scrollbar-custom">
                        <!-- Segments will be added here dynamically -->
                        <div id="empty-state" class="empty-state">
                            <div class="empty-state-icon">
                                <i class="fas fa-road"></i>
                            </div>
                            <h3 class="empty-state-title">Aucun segment cr√©√©</h3>
                            <p class="empty-state-text">Commencez par cr√©er votre premier segment en utilisant le formulaire √† gauche</p>
                        </div>
                    </div>

                    <!-- JSON Preview View -->
                    <div id="json-preview-view" class="hidden">
                        <div class="bg-gray-900 rounded-lg p-5">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-green-300">Pr√©visualisation JSON</h3>
                                <button id="copy-json" class="copy-json-btn">
                                    <i class="fas fa-copy mr-2"></i>
                                    Copier
                                </button>
                            </div>
                            <pre id="json-output" class="json-output"></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="mt-8 pt-6 border-t border-gray-800 text-center text-gray-500 text-sm">
                <p>Segment Modeler - Application de mod√©lisation de segments robotiques</p>
                <p class="mt-1">Exporte tes donn√©es en JSON pour les utiliser dans tes projets</p>
            </footer>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>